5. íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„

### â€» íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ì™€ ë§‰ëŒ€ê·¸ë˜í”„ì™€ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ ?

- ë§‰ëŒ€ ê·¸ë˜í”„ ? ê°œë³„ í•­ëª©ì˜ ìˆ˜ëŸ‰ì´ë‚˜ ë¹ˆë„ë¥¼ ë¹„êµí•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ ? ì—°ì†í˜• ë°ì´í„°ì˜ ë¶„í¬ë¥¼ ì‹œê°í™” í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
    
    ë°ì´í„°ì˜ ë¶„í¬ë¥¼ í•œëˆˆì— íŒŒì•…í•˜ê¸° ìœ ìš©í•©ë‹ˆë‹¤.
    
    ex. ì‹œí—˜ ì ìˆ˜ ë¶„í¬ 
    

### ğŸ“ë¬¸ë²•1. Rí•¨ìˆ˜_íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°_[ë‚ ì”¨ ë°ì´í„°](https://cafe.daum.net/oracleoracle/Soei/32)

```sql
#1. ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
setwd("c:\\data")
weather <- read.csv("weather.csv", header=TRUE, fileEncoding="euc-kr")
head(weather)
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/385e373f-9af1-4159-b217-317f3f3f7628/Untitled.png)

```sql
#2. ë°ì´í„°ë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.
nrow(weather) #472
ncol(weather) #8
str(weather) 

#3. ì‹œê°í™”í•  ë°ì´í„°ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
ahot <- weather$í‰ê· ê¸°ì˜¨
ahot

#4. í‰ê· ê¸°ì˜¨ ë°ì´í„°ë¥¼ íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•´ì„œ ë°ì´í„°ì˜ ë¶„í¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
histo<- hist(ahot)
histo
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/e60821f6-963b-4beb-a54c-a50edf1492c8/Untitled.png)

```r
#5. ê°„ê²©ì¡°ì •(breaks ì˜µì…˜ì„ ì‚¬ìš©)
histo4<- hist(ahot, breaks=24)
histo4

histo5<-hist(ahot, breaks=seq(10,4,by=1))
histo5
```

![histo4](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/3c579c0e-75a0-47df-972b-46b1a9d6035d/Untitled.png)

histo4

![histo5](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/62df6ba8-c162-4ab5-9bf2-068f94eda661/Untitled.png)

histo5

ê·¸ë˜í”„ í•´ì„:  xì¶•ì´ í‰ê· ê¸°ì˜¨ ê°’(10ë„~40ë„ ì‚¬ì´) 

                   yì¶•ì´ ê° êµ¬ê°„ì— í•´ë‹¹í•˜ëŠ” ë¹ˆë„ìˆ˜

ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ê°€ 24ë„ì—ì„œ 29ë„ ì‚¬ì´ì— ì§‘ì¤‘ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 

ê°€ì¥ ë¹ˆë„ê°€ ë†’ì€ êµ¬ê°„ì´ ì•½ 26ë„ì—ì„œ 27ë„ ì‚¬ì´ë¡œ ë³´ì´ë©° ì´ êµ¬ê°„ì—ì„œ ì•½ 100ê°œì˜ ë°ì´í„° í¬ì¸íŠ¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. 

15ë„ ì´í•˜ì™€ 30ë„ ì´ìƒì˜ êµ¬ê°„ì—ì„œëŠ” ë°ì´í„° í¬ì¸íŠ¸ê°€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.  

ì™œë„(skewness)ë¥¼ ë³´ë©´ íˆìŠ¤í† ê·¸ë¨ì˜ ë¶„í¬ëŠ” ëŒ€ì¹­ì ì´ì§€ ì•Šê³  ì•½ê°„ ì™¼ìª½ìœ¼ë¡œ ì¹˜ìš°ì³ ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” ì™¼ìª½ìœ¼ë¡œ ê¼¬ë¦¬ê°€ ê¸´ ì™¼ìª½ ì™œë„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. 

ì¢€ ë” ë°ì´í„°ì˜ ì¹˜ìš°ì¹¨ì„ ì‹œê°í™”í•˜ë ¤ë©´ í™•ë¥  ë°€ë„ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ë©´ ë©ë‹ˆë‹¤.

```r
# í™•ë¥ ë°€ë„ íˆìŠ¤í† ê·¸ë¨
hist(ahot, breaks=seq(10,40,by=1), col="grey",border="white", 
     prob=TRUE, ylin=c(0,0.3))
     
-> prob=TRUE ì˜µì…˜ì„ ì¼ê¸° ë•Œë¬¸ì— yì¶•ì´ ë¹ˆë„ìˆ˜ê°€ ì•„ë‹ˆë¼ í™•ë¥ ì…ë‹ˆë‹¤.      

# í™•ë¥  ë°€ë„ íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ì— í™•ë¥  ë°€ë„ ê·¸ë˜í”„ ë¼ì¸ ê·¸ë¦¬ê¸°
lines(density(ahot), col='red')
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/9c8b2043-cdf0-4067-aa11-fa73350a5b4e/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/8cfe8db3-2211-420c-859b-5bb7f35b3b6e/Untitled.png)

### â€» í™•ë¥ ë°€ë„ íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ì—ì„œ í™•ë¥ ë°€ë„ë¼ëŠ”ê²Œ ë¬´ì—‡ì¸ê°€ ?

í™•ë¥ ë°€ë„(probability density)ëŠ” ì—°ì†í˜• í™•ë¥ ë³€ìˆ˜ì˜ ë¶„í¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í•¨ìˆ˜ 

í™•ë¥ ë°€ë„í•¨ìˆ˜ëŠ” íŠ¹ì • ê°’ì´ ì•„ë‹ˆë¼ íŠ¹ì • êµ¬ê°„ì— ì†í•˜ëŠ” í™•ë¥ ë³€ìˆ˜ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. 

(í‘œë³¸(ì¼ë¶€ ë°ì´í„°)ìœ¼ë¡œ ìš°ë¦¬ë¼ë‚˜ ì´ˆë“±í•™êµ í•™ìƒë“¤ì˜ í‚¤ë¥¼ ì¶”ì •í•¨. ë‹¤ ì „ìˆ˜ì¡°ì‚¬ ëª»í•˜ë‹ˆê¹Œ. ë¹ˆë„ìˆ˜ë¥¼ êµ¬í•´ì„œ 00êµ¬ê°„ì— ë°ì´í„°ê°€ ë¶„í¬ë  í™•ë¥ ë¡œ ë‚˜íƒ€ë‚´ì¤Œ  

```r
ì •ë¦¬í•˜ë©´ . . 
# ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° 
weather <- read.csv('weather.csv',header=T, fileEncoding='euc-kr')

# í™•ë¥ ë°€ë„ íˆìŠ¤í† ê·¸ë¨
hist(ahot, breaks=seq(10,40,by=1), col="grey",border="white", 
     prob=TRUE, ylin=c(0,0.3))
     
# í™•ë¥  ë°€ë„ íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ì— í™•ë¥  ë°€ë„ ê·¸ë˜í”„ ë¼ì¸ ê·¸ë¦¬ê¸°
lines(density(ahot), col='red')
```

ë¬¸ì œ111. ì¤‘ê³ ì°¨ì˜ ê°€ê²© ë°ì´í„°ì˜ ë¶„í¬ë¥¼ ë¶„ì„í•˜ê¸° ì‰½ë„ë¡ íˆìŠ¤í† ê·¸ë¨ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ì‹œì˜¤ 

```r
cars<- read.csv('usedcars.csv',header=T)
cars

c_price<- cars[ , c('price')]
c_price

max(cars$price) #21992
min(cars$price) #3800

hist(c_price, breaks=seq(0,26000,by=1000),col="grey",border="white", 
     prob=TRUE, ylin=c(0,0.0002))

lines( density(c_price), 
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/c98ac741-0b57-4e4b-a452-0777051b37cc/Untitled.png)

ê·¸ë˜í”„ í•´ì„ : ëŒ€ë¶€ë¶„ì˜ ì¤‘ê³ ì°¨ ê°€ê²©ì´ ì•½ 10,000 ë‹¬ëŸ¬ì—ì„œ 15,000ë‹¬ëŸ¬ ì‚¬ì´ì— ì§‘ì¤‘ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê°€ê²©ì˜ ë¶„í¬ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê¸´ ê¼¬ë¦¬ë¥¼ ê°€ì§„ ë¹„ëŒ€ì¹­ í˜•íƒœë¥¼ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” ì¤‘ê³ ì°¨ì˜ ê°€ê²©ì´ ë‚®ì€ ê°€ê²©ëŒ€ì— ì§‘ì¤‘ë˜ì–´ ìˆìœ¼ë©°, ê³ ê°€ì˜ ì¤‘ê³ ì°¨ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ì ìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 

### ğŸ“ë¬¸ë²•2. plotly_ì¤‘ê³ ì°¨ ê°€ê²© ë°ì´í„°

```r
# plotly íŒ¨í‚¤ì§€ ë¡œë“œ
library(plotly)

# ë°ì´í„° ë¡œë“œ
data <- read.csv("usedcars.csv")

# plotlyë¥¼ ì‚¬ìš©í•œ íˆìŠ¤í† ê·¸ë¨ ìƒì„±
fig <- plot_ly(data, x = ~price, type = 'histogram', marker = list(color = 'blue'))

# ê·¸ë˜í”„ ë ˆì´ì•„ì›ƒ ì„¤ì •
fig <- fig %>%
  layout(title = 'Histogram of Used Car Prices',
         xaxis = list(title = 'Price'),
         yaxis = list(title = 'Count'))

# ê·¸ë˜í”„ ì¶œë ¥
fig
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/54607ac3-924b-48ee-a25e-faa15dd49dee/Untitled.png)

### ğŸ“ë¬¸ë²•3. plotly_yì¶•ì´ ë¹ˆë„ìˆ˜ê°€ ì•„ë‹ˆë¼ í™•ë¥ ë¡œ ì¶œë ¥ ë˜ê²Œ í•´ì„œ ì‹œê°í™” í•˜ì‹œì˜¤ !

```r
# plotly íŒ¨í‚¤ì§€ ë¡œë“œ
library(plotly)

# ë°ì´í„° ë¡œë“œ
data <- read.csv("usedcars.csv")

# plotlyë¥¼ ì‚¬ìš©í•œ íˆìŠ¤í† ê·¸ë¨ ìƒì„±
fig <- plot_ly(data, x = ~price, type = 'histogram', marker = list(color = 'blue'), 
                  **histnorm = 'probability'**)

# ê·¸ë˜í”„ ë ˆì´ì•„ì›ƒ ì„¤ì •
fig <- fig %>%
  layout(title = 'Probability Histogram of Used Car Prices',
         xaxis = list(title = 'Price'),
         yaxis = list(title = 'Probability'))

# ê·¸ë˜í”„ ì¶œë ¥
fig
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/800a4c7f-12bf-4a0a-9a9b-1cd9ca7fd647/Untitled.png)

[ì˜¤ëŠ˜ì˜ ë§ˆì§€ë§‰ ë¬¸ì œ] 

ì˜¤ëŠ˜ ê·¸ë¦° ê·¸ë˜í”„ë“¤ì„ ì´ìš©í•´ì„œ SQLí¬íŠ¸í´ë¦¬ì˜¤ ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ ì‹œê°í™”ë¥¼ í•˜ì‹œì˜¤ ! 

```r
# plotlyë¥¼ ì‚¬ìš©í•œ ë¬¼ê±´ê¸ˆì•¡ íˆìŠ¤í† ê·¸ë¨ ìƒì„±
fig <- plot_ly(house, x = ~ë¬¼ê±´ê¸ˆì•¡, type = 'histogram', 
								marker = list(color = 'grey')
                )

fig
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/ea7510f6-6de0-4a10-a300-257b51913324/Untitled.png)

```r
 - ê°€ê²© ~ ì¸µ ì‚°í¬ë„ ê·¸ë˜í”„

# ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
library(plotly)
setwd("c:\\data")
usedcars<- read.csv("usedcars.csv",header=T)

# ì‚°í¬ë„ ê·¸ë˜í”„ ìƒì„±
fig<- plot_ly( data= usedcars, 
								x= ~mileage,
								y= ~price, 
								type= 'scatter', 
								mode= 'markers',
								markers=list(color='blue'))
								
fig								

#ì¶”ì„¸ì„  ì¶”ê°€
house$ê±´ë¬¼ì¸µ<- ifelse (is.na(house$ì¸µ),1,$ì¸µ)

fig <- fig %>% add_trace ( x = house$ê±´ë¬¼ì¸µ,
                           y = fitted ( lm ( ë¬¼ê±´ê¸ˆì•¡ ~ ê±´ë¬¼ì¸µ, data = house) ),
                           type = 'scatter',
                           mode = 'lines',
                           line = list(color = 'red'),
                           name = 'Trend Line') 
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/f5cc6a92-f75a-4e93-995a-a20afc136d30/Untitled.png)
# 9ï¸âƒ£ì†Œë¦¬ ë°ì´í„° ì‹œê°í™”
### ğŸ“Code1. Rë¡œ ìŒì•…ì†Œë¦¬ ì‹œê°í™”(so hot)
```r
install.packages("tuneR")
library(tuneR)

setwd("c:\\data")
audio<- readWave("sohot_trimmed.wav")

head(audio@left, 1000)

audio_length<-length(audio@left)
a<- audio_length/2 -500
b<- audio_length/2 + 499

m_data<- audio@left[ a:b ]

c<- head(m_data, 100) 
```

<img src="https://github.com/goguma999/R__/blob/main/_9-1.png">

```r
plot(c)
```
<img src="https://github.com/goguma999/R__/blob/main/_9-2.png">


&nbsp;


### ğŸ“Code2. ì •ìƒì ì¸ ì‹¬ì¥ë°•ë™ ì†Œë¦¬ì™€ ì§ˆí™˜ì´ ìˆëŠ” ì‹¬ì¥ë°•ë™ ì†Œë¦¬ë¥¼ ê°ê° ì‹œê°í™”

```r
audio1<- readWave("normal.wav")
audio2<- readWave("ps.wav")
audio3<- readWave("mr.wav")
audio4<- readWave("ar.wav")

play(audio1)
play(audio2)
play(audio3)
play(audio4)

â”Œ
graphics.off()     # ê·¸ë˜í”„ë¥¼ í™”ë©´ì—ì„œ ì§€ìš°ê¸° 
par(mfrow=c(2,2), new=T)  # 2í–‰ 2ì—´ë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë¼ 
par(mar=c(1,1,1,1))  # ì—¬ë°±ì˜ ê¸¸ì´ë¥¼ ì§€ì • (ì¢Œìš°ìƒí•˜) 
plot(audio1)
plot(audio2)
plot(audio3)
plot(audio4)
â”˜ í•œ ë²ˆì— ë“œë˜ê·¸í•´ì„œ ì¶œë ¥í•´ì•¼í•¨ 
```

<img src="9-4">


### ğŸ“Code3. ì†Œë¦¬ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬í•˜ëŠ” ë°©ë²•
```r
ì´ë¯¸ì§€ --> cv2.imread ----> ìˆ«ì ----> ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜
ì†Œë¦¬ ----> librosa  ------> ìˆ«ì ----> ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜
```

ì†Œë¦¬ë¥¼ ë‹¨ìˆœíˆ ìˆ«ìë¡œ ë³€í™˜ë§Œ í•˜ë©´ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë‹¤ìŒì˜ ì‘ì—…ì„ ê¼­ í•´ì¤˜ì•¼ í•¨. 

[ì°¸ê³ ìë£Œ](https://cafe.daum.net/oracleoracle/Sotv/264)

í–‡ë¹›ì„ í”„ë¦¬ì¦˜ì— í†µê³¼ì‹œí‚¤ë©´ ì¼ê³± ìƒ‰ê¹” ë¬´ì§€ê°œë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ê²ƒì²˜ëŸ¼ ì†Œë¦¬ë„ í‘¸ë¦¬ì—ì˜ ë³€í™˜ì„ í†µí•´ì„œ ì£¼íŒŒìˆ˜ ìˆœìœ¼ë¡œ í¼ì³ ë†“ì„ ìˆ˜ ìˆìŒ. ì´ë¥¼ ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ì´ë¼ê³  í•¨ 

### ğŸ“Code4. ì†Œë¦¬ë¥¼ ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ í”„ë¦¬ì¦˜ì— ë„£ì–´ì„œ ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ ë§Œë“¤ê¸°

```r
ì†Œë¦¬ â€”> ìˆ«ì (ì†Œë¦¬ ì¦í­) â€”> ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ í”„ë¦¬ì¦˜ â€”> ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ 
```

**âœ… (ê°€)ì£¼ì œ: ë‰´ì§„ìŠ¤ì™€ ì•„ì´ë¸Œ ë…¸ë˜ ë¶„ë¥˜í•˜ëŠ” ê¸°ê³„ ë§Œë“¤ê¸°**

```r
#1. mp3ë¥¼ wavë¡œ ë³€í™˜
#2. wav íŒŒì¼ì„ ìë¥´ëŠ” ì‘ì—… 
#3. wavë¥¼ ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ìœ¼ë¡œ ë³€í™˜
#4. ë³€í™˜í•œ ìˆ«ìë¥¼ ê¸°ê³„í•™ìŠµ ì‹œí‚µë‹ˆë‹¤. <- # í•˜ì´í¼ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°ì •í•´ì„œ ì •í™•ë„ ì¢‹ì€
																			# ê¸°ê³„ë¥¼ ìƒì„±
```

â–ªï¸ì‹¤ìŠµ1. mp3 íŒŒì¼ì„ wavë¡œ ë³€í™˜í•˜ê¸° 

```r
-- ê³µìœ í´ë” \\192.168.19.14

# MP3 íŒŒì¼ì„ WAV íŒŒì¼ë¡œ ë³€í™˜
install.packages("tuneR")
install.packages("av")

library(tuneR)
library(av)

# íŒŒì¼ ê²½ë¡œ ì„¤ì •
mp3_file <- "c:\\data\\afterlike.mp3"
wav_file <- "c:\\data\\afterlike.wav"

# MP3 íŒŒì¼ì„ WAV íŒŒì¼ë¡œ ë³€í™˜
av_audio_convert(mp3_file, wav_file)

# ë³€í™˜ëœ íŒŒì¼ì„ í™•ì¸
if (file.exists(wav_file)) {
  cat("ë³€í™˜ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:", wav_file, "\n")
} else {
  cat("ë³€í™˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n")
}
```

â–ªï¸ì‹¤ìŠµ2. wav íŒŒì¼ì„ í¬ê¸°ë¥¼ ì‘ê²Œ ì˜ë¼ëƒ„ 

```r
# 1. ì•ë¶€ë¶„ë§Œ ì˜ë¼ë‚´ê¸°
# í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¡œë“œ
install.packages("tuneR")
library(tuneR)

# ìŒì„± íŒŒì¼ì„ ì½ì–´ì˜´
file_path <- "afterlike.wav"
sample_wave <- readWave(file_path)

# ìŒì„± ì‹ í˜¸ì™€ ìƒ˜í”Œë§ ì†ë„ ì¶”ì¶œ
audio_samples <- sample_wave@left
sample_rate <- sample_wave@samp.rate

# 1ë¶„(60ì´ˆ)ì— í•´ë‹¹í•˜ëŠ” ìƒ˜í”Œ ìˆ˜ ê³„ì‚°
duration_sec <- 60  # 1ë¶„ = 60ì´ˆ
num_samples <- duration_sec * sample_rate

# ì•ë¶€ë¶„ 1ë¶„ì˜ ìŒì›ë§Œ ì˜ë¼ë‚´ê¸°
if (num_samples > length(audio_samples)) {
  stop("The file is shorter than 1 minute.")
}
trimmed_samples <- audio_samples[1:num_samples]

# ìƒˆë¡œìš´ Wave ê°ì²´ ìƒì„±
trimmed_wave <- Wave(left = trimmed_samples, samp.rate = sample_rate, bit = sample_wave@bit)

# ìƒˆë¡œìš´ íŒŒì¼ë¡œ ì €ì¥
writeWave(trimmed_wave, "afterlike_trimmed.wav")

# ê²°ê³¼ í™•ì¸
cat("The first 1 minute of the audio has been trimmed and saved as 'afterlike_trimmed.wav'\n")
```

â–ªï¸ì‹¤ìŠµ3. ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ìœ¼ë¡œ ì‹œê°í™” í•˜ê¸° 

```r
# í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¡œë“œ
install.packages("tuneR")
install.packages("seewave")

library(tuneR)
library(seewave)

# ìŒì„± íŒŒì¼ì„ ì½ì–´ì˜´
sample_wave <- readWave("afterlike_trimmed.wav")

# ìŒì„± ì‹ í˜¸ì™€ ìƒ˜í”Œë§ ì†ë„ ì¶”ì¶œ
audio_samples <- sample_wave@left
sample_rate <- sample_wave@samp.rate

# ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ ê³„ì‚° ë° ì‹œê°í™”
par(mfrow = c(1, 1))  # ê·¸ë˜í”„ë¥¼ 1x1 ë°°ì¹˜ë¡œ ì„¤ì •
spectro(audio_samples,fastdisp=TRUE, f = sample_rate, ovlp = 50, collevels = seq(-40, 0, 1))

#audio_samples <- ë¶„ì„í•  ì†Œë¦¬
#fastdisp <- ë¹ ë¥¸ ë””ìŠ¤í”Œë ˆì´ ëª¨ë“œë¥¼ ì‚¬ìš©. ê·¸ë˜í”„ë¥¼ ë” ë¹ ë¥´ê²Œ ëœë”ë§ í•˜ê² ë‹¤.
#f=sample_rate <- ìƒ˜í”Œë§ ì£¼íŒŒìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
#ovlp = 50 <- ì˜¤ë²„ë©ì„ 50% ê²¹ì¹˜ê²Œ í•´ì„œ ìŠ¤í™íŠ¸ëŸ¼ì˜ ì‹œê°„ í•´ìƒë„ë¥¼ ë†’ì´ê²Œ í•´ì¤Œ
#collevels = seq(-40, 0, 1) 
#â””ìƒ‰ìƒ ì§€ì •í•˜ê¸° -40db ~ 0dbê¹Œì§€ 1db ê°„ê²©ìœ¼ë¡œ ìƒ‰ìƒ ë ˆë²¨ì„ ì§€ì • í•˜ê² ë‹¤. 

```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/6b33fdc0-9d23-4f6c-ad57-8ca4c40b460e/Untitled.png)

ê·¸ë˜í”„ ì„¤ëª…: 

1. ê°€ë¡œì¶•: ì‹œê°„ 0~ 60ì´ˆ 
2. ì„¸ë¡œì¶•: ì£¼íŒŒìˆ˜ ( 0 khz ~ 20khz) 
3. ìƒ‰ìƒ : ì‹ í˜¸ì˜ ì§„í­. ì˜¤ë¥¸ìª½ì— ìˆëŠ” ê²ƒ-ìƒ‰ìƒ ëˆˆê¸ˆ, ë¹¨ê°„ìƒ‰ì´ ê°€ì¥ ë†’ì€ ì§„í­ ,
    
    íŒŒë€ ìƒ‰ì´ ê°€ì¥ ë‚®ì€ ì§„í­, ì¤‘ê°„ ìƒ‰ìƒì´ ì¤‘ê°„ ì§„í­ 
    

â–ªï¸ë¬¸ì œ140. í´ë˜ì‹ ìŒì•…ì„ ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ìœ¼ë¡œ ê·¸ë¦¬ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # MP3 íŒŒì¼ì„ WAV íŒŒì¼ë¡œ ë³€í™˜
    install.packages("tuneR")
    install.packages("av")
    
    library(tuneR)
    library(av)
    
    # íŒŒì¼ ê²½ë¡œ ì„¤ì •
    mp3_file <- "c:\\data\\morning.mp3"
    wav_file <- "c:\\data\\morning.wav"
    
    # MP3 íŒŒì¼ì„ WAV íŒŒì¼ë¡œ ë³€í™˜
    av_audio_convert(mp3_file, wav_file)
    
    # ë³€í™˜ëœ íŒŒì¼ì„ í™•ì¸
    if (file.exists(wav_file)) {
      cat("ë³€í™˜ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:", wav_file, "\n")
    } else {
      cat("ë³€í™˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n")
    }
    ```
    
    ```r
    # 1. ì•ë¶€ë¶„ë§Œ ì˜ë¼ë‚´ê¸°
    # í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¡œë“œ
    install.packages("tuneR")
    library(tuneR)
    
    # ìŒì„± íŒŒì¼ì„ ì½ì–´ì˜´
    file_path <- "morning.wav"
    sample_wave <- readWave(file_path)
    
    # ìŒì„± ì‹ í˜¸ì™€ ìƒ˜í”Œë§ ì†ë„ ì¶”ì¶œ
    audio_samples <- sample_wave@left
    sample_rate <- sample_wave@samp.rate
    
    # 1ë¶„(60ì´ˆ)ì— í•´ë‹¹í•˜ëŠ” ìƒ˜í”Œ ìˆ˜ ê³„ì‚°
    duration_sec <- 60  # 1ë¶„ = 60ì´ˆ
    num_samples <- duration_sec * sample_rate
    
    # ì•ë¶€ë¶„ 1ë¶„ì˜ ìŒì›ë§Œ ì˜ë¼ë‚´ê¸°
    if (num_samples > length(audio_samples)) {
      stop("The file is shorter than 1 minute.")
    }
    trimmed_samples <- audio_samples[1:num_samples]
    
    # ìƒˆë¡œìš´ Wave ê°ì²´ ìƒì„±
    trimmed_wave <- Wave(left = trimmed_samples, samp.rate = sample_rate, bit = sample_wave@bit)
    
    # ìƒˆë¡œìš´ íŒŒì¼ë¡œ ì €ì¥
    writeWave(trimmed_wave, "afterlike_trimmed.wav")
    
    # ê²°ê³¼ í™•ì¸
    cat("The first 1 minute of the audio has been trimmed and saved as 'afterlike_trimmed.wav'\n")
    ```
    
    ```r
    # í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¡œë“œ
    install.packages("tuneR")
    install.packages("seewave")
    
    library(tuneR)
    library(seewave)
    
    # ìŒì„± íŒŒì¼ì„ ì½ì–´ì˜´
    sample_wave <- readWave("afterlike_trimmed.wav")
    
    # ìŒì„± ì‹ í˜¸ì™€ ìƒ˜í”Œë§ ì†ë„ ì¶”ì¶œ
    audio_samples <- sample_wave@left
    sample_rate <- sample_wave@samp.rate
    
    # ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ ê³„ì‚° ë° ì‹œê°í™”
    par(mfrow = c(1, 1))  # ê·¸ë˜í”„ë¥¼ 1x1 ë°°ì¹˜ë¡œ ì„¤ì •
    spectro(audio_samples,fastdisp=TRUE, f = sample_rate, ovlp = 50, collevels = seq(-40, 0, 1))
    
    #audio_samples <- ë¶„ì„í•  ì†Œë¦¬
    #fastdisp <- ë¹ ë¥¸ ë””ìŠ¤í”Œë ˆì´ ëª¨ë“œë¥¼ ì‚¬ìš©. ê·¸ë˜í”„ë¥¼ ë” ë¹ ë¥´ê²Œ ëœë”ë§ í•˜ê² ë‹¤.
    #f=sample_rate <- ìƒ˜í”Œë§ ì£¼íŒŒìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
    #ovlp = 50 <- ì˜¤ë²„ë©ì„ 50% ê²¹ì¹˜ê²Œ í•´ì„œ ìŠ¤í™íŠ¸ëŸ¼ì˜ ì‹œê°„ í•´ìƒë„ë¥¼ ë†’ì´ê²Œ í•´ì¤Œ
    #collevels = seq(-40, 0, 1) 
    #â””ìƒ‰ìƒ ì§€ì •í•˜ê¸° -40db ~ 0dbê¹Œì§€ 1db ê°„ê²©ìœ¼ë¡œ ìƒ‰ìƒ ë ˆë²¨ì„ ì§€ì • í•˜ê² ë‹¤. 
    
    ```
  

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/a662ffd6-51d5-4b60-9500-242063bba5b0/Untitled.png)



### âœ… ì†Œë¦¬ ë°ì´í„° ë¶„ì„ì´ í™œìš©ë˜ëŠ” ë¶„ì•¼
1. ê±´ê°• ë° ì˜ë£Œ   
    ì‹¬ì¥ì†Œë¦¬, í ì†Œë¦¬ë“±ì˜ ë¶„ì„ì„ í†µí•´ ì‹¬ì¥ë³‘, íì§ˆí™˜ì„ ì§„ë‹¨í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.   
2. ë³´ì•ˆ ë° ê°ì‹œ  
    ë³´ì•ˆ ì‹œìŠ¤í…œì—ì„œ íŠ¹ì • ì†Œë¦¬(ìœ ë¦¬ê°€ ê¹¨ì§€ëŠ” ì†Œë¦¬)ë¥¼ ê°ì§€í•˜ì—¬ ì¹¨ì…ì„ íƒì§€  
3. ìŒì„± ë° ìŒì•… ì²˜ë¦¬  
    - ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©ìì˜ ì·¨í–¥ì„ ë¶„ì„í•˜ì—¬ ë§ì¶¤í˜• ìŒì•…ì„ ì œì‘í•˜ê±°ë‚˜ ì¶”ì²œí•˜ëŠ”ë° í™œìš©   
    - í«í„ìŠ¤ë©. ë°˜ë ¤ê²¬ê³¼ êµê°ì„ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë””ë°”ì´ìŠ¤ë¥¼ ë§Œë“œëŠ”ë° í™œìš©


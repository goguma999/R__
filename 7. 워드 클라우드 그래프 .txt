7. ì›Œë“œ í´ë¼ìš°ë“œ ê·¸ë˜í”„ 


> í…ìŠ¤íŠ¸ ë°ì´í„° íƒìƒ‰ ë° ìš”ì•½ ê·¸ë¦¬ê³  ì£¼ìš” ë‹¨ì–´ ê°•ì¡° ë“±ì„ ì‹œê°í™” í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê·¸ë˜í”„

íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ê±°ë‚˜ ì†Œì…œ ë¯¸ë””ì–´ì™€ ë‰´ìŠ¤ì—ì„œ ì–¸ê¸‰í•˜ëŠ” ì£¼ìš” ë‚´ìš©ë“¤ì„ ë¶„ì„í•  ë•Œ ìœ ìš©í•œ ê·¸ë˜í”„

ë§ˆì¼€íŒ…ì—ì„œ ê³ ê° ë§Œì¡±ë„ ë“±ì„ ì¡°ì‚¬í•  ë•Œ ë§ì´ ì‚¬ìš©

ë¬¸ì„œë‚˜ ë¬¸í•™ ì‘í’ˆì„ ë¶„ì„í•˜ê³ ì í•  ë•Œ ìœ ìš©í•œ ê·¸í”„
> 

### â€»Â Â Rjava ì„¤ì¹˜í•˜ê¸°

```r
1.Â ì•„ë˜ì—ì„œÂ javaÂ 64ë¹„íŠ¸ë¥¼Â ë‹¤ìš´ë¡œë“œÂ ë°›ëŠ”ë‹¤
https://www.java.com/en/download/manual.jsp

2. Windows Offline (64-bit) ìœ¼ë¡œ ì„¤ì¹˜

3.Â ì•„ë˜ì™€Â ê°™ì´Â í™˜ê²½ì„¤ì •ì„Â í•œë‹¤.
(RìŠ¤íŠœë””ì˜¤) Sys.setenv(JAVA_HOME='C:\\ProgramÂ Files\\Java\\jre1.8.0')(cë“œë¼ì´ë¸Œìë°”ìœ„ì¹˜)
â€»Â ì„¤ëª…Â :Â RÂ ì—ì„œÂ ì§€ê¸ˆÂ ìë°”í™ˆÂ ìœ„ì¹˜ê°€Â ì–´ë””ìˆë‹¤ëŠ”Â ê²ƒì„Â ì•Œë ¤ì£¼ëŠ”Â ê²ƒ

4.Â ì„¤ì¹˜ë¥¼Â í•œë‹¤
install.packages("rJava")

library(rJava)
```

### ğŸ“ë¬¸ë²•2. í•œê¸€ì„ Rì´ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ KoNLP íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```r
# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ(ê°œì¸ ê¹ƒí—ˆë¸Œì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ìŠµë‹ˆë‹¤.) 
install.packages("remotes")
library(remotes)
remotes::install_github("haven-jeon/KoNLP")

library(KoNLP)
library(dplyr)

# ì‚¬ì „ ì„¤ì •
useNIADic() 

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
# ë§ˆì§€ë§‰ ì¤„ì— ì—”í„° 2ë²ˆ í•´ì•¼í•¨
winter <- readLines('winter.txt', encoding = 'UTF-8')

#ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ ì œê±° 
# UTF-8ì€ í•œê¸€ì´ë‚˜ ì¤‘êµ­ì–´ë“±ì„ ì§€ì›í•˜ëŠ” ë¬¸ìì…‹ì´ê³ , 
# ASCIIëŠ” ì˜ì–´ë¥¼ ì§€ì›í•˜ëŠ” ë¬¸ìì…‹ì…ë‹ˆë‹¤. 
# UTF-8ì„ ASCIIë¡œ ë³€í™˜í•˜ë©´ì„œ ë³€í™˜ë˜ì§€ ì•ŠëŠ” ë¬¸ìë¥¼ ""(null)ë¡œ ë°”ê¾¸ê² ë‹¤. 
winter <- iconv(winter, "UTF-8", "ASCII", sub="")

# íŠ¹ìˆ˜ë¬¸ì ì œê±°( gsub(ë³€ê²½ì „ ë¬¸ì, ë³€ê²½í›„ë¬¸ì, ì»¬ëŸ¼) )
# ^ëŠ” 'not'ì˜ ì˜ë¯¸. ì¼ë°˜ë¬¸ìë‚˜ ìˆ«ìê°€ ì•„ë‹ˆë©´ ì œê±°í•´ë¼. 
cleaned_winter <- gsub("[^[:alnum:][:space:]]", "", winter)

# ëª…ì‚¬ ì¶”ì¶œ
          â”ŒKoNLPì— ë‚´ì¥ëœ í•¨ìˆ˜
nouns <- extractNoun(cleaned_winter)

# ì¶”ì¶œëœ ëª…ì‚¬ í™•ì¸
print(nouns)
```

![ì´ë ‡ê²Œ ë‚˜ì˜¤ë©´ ì•ˆ ëœë‹¤ëŠ” . . KoNLPì—ì„œ ì½”ë“œ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ëŠ”. . ](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/9a0b9b1b-e80a-485c-8e6e-bb3da7cb7db2/Untitled.png)

ì´ë ‡ê²Œ ë‚˜ì˜¤ë©´ ì•ˆ ëœë‹¤ëŠ” . . KoNLPì—ì„œ ì½”ë“œ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ëŠ”. . 

### ğŸ“ë¬¸ë²•3. ì˜í™” ê²¨ìš¸ì™•êµ­ ëŒ€ë³¸ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ì‹œì˜¤

ë°ì´í„° ê²Œì‹œíŒì—ì„œ ê²¨ìš¸ì™•êµ­ ëŒ€ë³¸(winter.txt)ë¥¼ dataí´ë”ì— ê°€ì ¸ë‹¤ ë‘¡ë‹ˆë‹¤. 

```r
# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
install.packages("KoNLP", dependencies = TRUE)
install.packages("wordcloud")
install.packages("RColorBrewer")

library(KoNLP)
library(wordcloud)
library(RColorBrewer)

# ì‚¬ì „ ì„¤ì •
useNIADic()

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
file_path <- "winter.txt"
winter <- readLines("winter.txt", encoding = "UTF-8")

#iconv í•¨ìˆ˜ëŠ” í…ìŠ¤íŠ¸ ë°ì´í„°ì˜ ì¸ì½”ë”©ì„ ë³€í™˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. 
#ì´ í•¨ìˆ˜ëŠ” íŠ¹ì • ì¸ì½”ë”© í˜•ì‹ì—ì„œ ë‹¤ë¥¸ ì¸ì½”ë”© í˜•ì‹ìœ¼ë¡œ ë¬¸ìì—´ì„ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
#ì´ë¥¼ í†µí•´ í…ìŠ¤íŠ¸ ë°ì´í„°ì—ì„œ ë¹„ì •ìƒì ì¸ ë¬¸ìë‚˜ ì¸ì½”ë”© ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

winter <- iconv(winter, "UTF-8", "ASCII", sub="")

# íŠ¹ìˆ˜ë¬¸ì ì œê±°
cleaned_winter <- gsub("[^[:alnum:][:space:]]", "", winter)

# ëª…ì‚¬ ì¶”ì¶œ
nouns <- extractNoun(cleaned_winter)
	â””list í˜•

# ëª…ì‚¬ ë²¡í„°ë¥¼ í•˜ë‚˜ì˜ ë²¡í„°ë¡œ ë³€í™˜
nouns_vector <- unlist(nouns)

# ëª…ì‚¬ ë¹ˆë„ ê³„ì‚°
nouns_freq <- table(nouns_vector)

# ë°ì´í„° í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜
nouns_df <- as.data.frame(nouns_freq, stringsAsFactors = FALSE)
nouns_df 

names(nouns_df) <- c("word", "freq")

# ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
wordcloud(words = nouns_df$word, # ì›Œë“œ í´ë¼ìš°ë“œì— í¬í•¨ë  ë‹¨ì–´
          freq = nouns_df$freq,  # ë‹¨ì–´ì˜ ë¹ˆë„ìˆ˜
          min.freq = 2,          # ìµœì†Œ ë¹ˆë„ìˆ˜. ì´ ê°’ë³´ë‹¤ í° ë‹¨ì–´ë“¤ë§Œ ì‹œê°í™” 
          scale = c(4, 0.5),     # ì›Œë“œ í´ë¼ìš°ë“œì˜ ë‹¨ì–´ì˜ ê¸€ì”¨ í¬ê¸° ë²”ìœ„ 
          colors = brewer.pal(8, "Dark2")) # ìƒ‰ê¹”
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/d94c3db5-e305-4a1d-b493-bd1fb5132b9d/Untitled.png)

### ğŸ“ë¬¸ë²•4. EBS ë°©ì†¡êµ­ì˜ ì¸ê¸° ë§Œí™”ì¸ ë ˆì´ë”” ë²„ê·¸ ê²Œì‹œíŒì˜ ê²Œì‹œê¸€ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ì‹œì˜¤ ! (í•œê¸€ ë°ì´í„°)

ë°ì´í„°ëŠ” [ì—¬ê¸°](https://cafe.daum.net/oracleoracle/Soei/41)

íŒŒì´ì¬ ì›¹ìŠ¤í¬ë¡¤ë§ìœ¼ë¡œ ìŠ¤í¬ë¡¤ í•¨.

```r
# ë°°ìš´ ì‚¬ëŒë“¤ì´ ì“°ëŠ” ì„¸ë ¨ëœ ì›Œë“œí´ë¼ìš°ë“œ 
install.packages("wordcloud2")

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
library(wordcloud2)
library(RColorBrewer)
library(plyr)
library(data.table)

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
setwd("c:\\data")  # íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
txt <- readLines('ladybug5.txt', encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ë¥¼ ì œê±°í•©ë‹ˆë‹¤. |nìš”ëŸ°ê±°. 
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")

# í•œê¸€ê³¼ ìˆ«ì, ê³µë°±ì„ ì œì™¸í•œ ëª¨ë“  íŠ¹ìˆ˜ë¬¸ìë¥¼ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("[^[:alnum:][:space:]ã„±-ã…ã…-ã…£ê°€-í£]", " ", cleaned_txt)

# ì—°ì†ëœ ê³µë°±ì„ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  # ì—°ì†ëœ ê³µë°± ì œê±°

# ëª…ì‚¬ ì¶”ì¶œ í•¨ìˆ˜ ( ì„ ìƒë‹˜ì´ ë§Œë“¤ì–´ì£¼ì‹  í•¨ìˆ˜. KoNLPì— ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ GPTì™€ í•¨ê»˜ë¼ë©´. ) 
extract_nouns_simple <- function(doc) {
  doc <- as.character(doc) # ë¬¸ìë¡œ ë³€í™˜
  words <- unlist(strsplit(doc, "\\s+"))  # ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬
  nouns <- Filter(function(x) {grepl("^[ê°€-í£]+$", x) && nchar(x) >= 2}, words)  # í•œê¸€ë¡œë§Œ êµ¬ì„±ëœ ë‹¨ì–´ ì¶”ì¶œ ë° ê¸¸ì´ 2 ì´ìƒ í•„í„°ë§
  return(nouns)                       â””grepì—ì„œì˜ êº½ì‡ : 'ì‹œì‘' 
}

# ëª…ì‚¬ ì¶”ì¶œ
nouns <- extract_nouns_simple(cleaned_txt)

# ì¶”ì¶œëœ ëª…ì‚¬ í™•ì¸
print(head(nouns, 10))  # ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ê³„ì‚°
word_freq <- table(nouns)
word_freq <- as.data.frame(word_freq, stringsAsFactors = FALSE)
word_freq <- arrange(word_freq, desc(Freq)) # ëª…ì‚¬ì˜ ë¹ˆë„ìˆ˜ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬

# ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸
print(head(word_freq, 10))

# ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ í™•ì¸ ë° ì œê±°
# ë¹ˆ ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ” í–‰ì„ ì œê±°í•©ë‹ˆë‹¤. 
word_freq <- word_freq[word_freq$nouns != "", ]

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ë°ì´í„°í”„ë ˆì„ í™•ì¸
print(head(word_freq, 10))

# ì›Œë“œí´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq, shape = "heart", color = brewer.pal(8, "Dark2"))
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/2b4c8daf-77e2-4db4-b97f-c3678bd328bf/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/b77c20e2-8401-42d4-8fa0-36246c336516/Untitled.png)

```r
# íŠ¹ì • ë‹¨ì–´ ì œì™¸í•˜ê¸°
word_freq <- subset( word_freq, nouns != "ë„ˆë¬´")
word_freq <- subset( word_freq, nouns != "ë¹¨ë¦¬")
.. . 
```

â–ªï¸ë¬¸ì œ124. ìœ íŠœë¸Œ ëŒ“ê¸€ ë¶„ì„ì„ ìœ„í•´ í• ë§¤ë–¡ë³¶ì´ë¡œ ê²€ìƒ‰í•œ ëª¨ë“  ëŒ“ê¸€ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™”í•˜ì‹œì˜¤ ! 

ë°ì´í„° [ì—¬ê¸°](https://cafe.daum.net/oracleoracle/Soei/42) 

```r
# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
setwd("c:\\data")  # íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
txt <- readLines('í• ë§¤ë–¡ë³¶ì´.txt', encoding = "UTF-8")
txt

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ë¥¼ ì œê±°í•©ë‹ˆë‹¤. |nìš”ëŸ°ê±°. 
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")

# í•œê¸€ê³¼ ìˆ«ì, ê³µë°±ì„ ì œì™¸í•œ ëª¨ë“  íŠ¹ìˆ˜ë¬¸ìë¥¼ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("[^[:alnum:][:space:]ã„±-ã…ã…-ã…£ê°€-í£]", " ", cleaned_txt)

# ì—°ì†ëœ ê³µë°±ì„ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  # ì—°ì†ëœ ê³µë°± ì œê±°

# ëª…ì‚¬ ì¶”ì¶œ í•¨ìˆ˜ ( ì„ ìƒë‹˜ì´ ë§Œë“¤ì–´ì£¼ì‹  í•¨ìˆ˜. KoNLPì— ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ GPTì™€ í•¨ê»˜ë¼ë©´. ) 
extract_nouns_simple <- function(doc) {
  doc <- as.character(doc) # ë¬¸ìë¡œ ë³€í™˜
  words <- unlist(strsplit(doc, "\\s+"))  # ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬
  nouns <- Filter(function(x) {grepl("^[ê°€-í£]+$", x) && nchar(x) >= 2}, words)  # í•œê¸€ë¡œë§Œ êµ¬ì„±ëœ ë‹¨ì–´ ì¶”ì¶œ ë° ê¸¸ì´ 2 ì´ìƒ í•„í„°ë§
  return(nouns)                    
}

# ëª…ì‚¬ ì¶”ì¶œ
nouns <- extract_nouns_simple(cleaned_txt)

# ì¶”ì¶œëœ ëª…ì‚¬ í™•ì¸
print(head(nouns, 10))  # ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ê³„ì‚°
word_freq <- table(nouns)
word_freq <- as.data.frame(word_freq, stringsAsFactors = FALSE)
word_freq <- arrange(word_freq, desc(Freq)) # ëª…ì‚¬ì˜ ë¹ˆë„ìˆ˜ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬

# ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸
print(head(word_freq, 10))

# ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ í™•ì¸ ë° ì œê±°
# ë¹ˆ ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ” í–‰ì„ ì œê±°í•©ë‹ˆë‹¤. 
word_freq <- word_freq[word_freq$nouns != "", ]
word_freq <- subset( word_freq, nouns != "ë–¡ë³¶ì´")

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ë°ì´í„°í”„ë ˆì„ í™•ì¸
print(head(word_freq, 10))

# ì›Œë“œí´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq, shape = "heart", color = brewer.pal(8, "Dark2"))
```

![ê°€ê¹Œì´ ëŒ€ë©´ ê±´ìˆ˜ë„ ë‚˜ì˜´ ](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/a43c29b0-d24e-4d5d-8450-d8ea77966992/Untitled.png)

ê°€ê¹Œì´ ëŒ€ë©´ ê±´ìˆ˜ë„ ë‚˜ì˜´ 

*ê¸°ë³¸ ì œê³µ ëª¨ì–‘

circle: ì›í˜• (ê¸°ë³¸ê°’)
cardioid: ì‹¬ì¥ ëª¨ì–‘
diamond: ë‹¤ì´ì•„ëª¬ë“œ ëª¨ì–‘
triangle-forward: ì •ì‚¼ê°í˜• (ì•ìª½)
triangle: ì •ì‚¼ê°í˜• (ë’¤ìª½)
pentagon: ì˜¤ê°í˜•
star: ë³„ ëª¨ì–‘

### ğŸ“ë¬¸ë²•5. ì˜ë¬¸ ë°ì´í„°ë¥¼ wordcloud2 íŒ¨í‚¤ì§€ë¡œ ì›Œë“œí´ë¼ìš°ë“œ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ì‹œì˜¤

```r
install.packages("wordcloud2")
install.packages("tm")           # í…ìŠ¤íŠ¸ ë°ì´í„° ì „ì²˜ë¦¬ ì „ë¬¸ íŒ¨í‚¤ì§€
install.packages("RColorBrewer") 
install.packages("plyr")         # ë°ì´í„° ì¡°ì‘ì„ ìœ„í•œ íŒ¨í‚¤ì§€
install.packages("data.table")   

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
library(wordcloud2)
library(tm)
library(RColorBrewer)
library(plyr)
library(data.table)

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
file_path <- "winter.txt"
txt <- readLines(file_path, encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ ì œê±°
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")
# íŠ¹ìˆ˜ë¬¸ì ì œê±° 
cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
# ì—°ì†ëœ ê³µë°±ë¬¸ìë¥¼ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  

# í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜ ( í…ìŠ¤íŠ¸ ë§ˆì´ë‹ íŒ¨í‚¤ì§€ì˜ corpus ê°ì²´ë¡œ ë³€í™˜ )
corpus <- Corpus(VectorSource(cleaned_txt))

# ë°ì´í„° ì „ì²˜ë¦¬
corpus <- tm_map(corpus, content_transformer(tolower))  # ì†Œë¬¸ìë¡œ ë³€í™˜
corpus <- tm_map(corpus, removePunctuation)  # êµ¬ë‘ì  ì œê±°(.,?!...)
corpus <- tm_map(corpus, removeNumbers)  # ìˆ«ì ì œê±°
corpus <- tm_map(corpus, removeWords, stopwords("en")) # ì˜ì–´ ë¶ˆìš©ì–´ ì œê±°(am, i, a, the..)
corpus <- tm_map(corpus, stripWhitespace)  # ì—¬ë°± ì œê±°

# ë‹¨ì–´ í–‰ë ¬ ìƒì„±
dtm <- TermDocumentMatrix(corpus)
m <- as.matrix(dtm)
word_freqs <- sort(rowSums(m), decreasing = TRUE) #ë‹¨ì–´ì˜ ë¹ˆë„ìˆ˜ê°€ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)

# ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq_df, shape = "heart", color = brewer.pal(8, "Dark2"))
```

![ì•ˆë‚˜ë‘ í¬ë¦¬ìŠ¤í† í”„ê°€ ë„ˆë¬´ ë‚˜ëŒ„ë‹¤.](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/7c15d2e9-70fa-46d0-a67d-c9b6579e7098/Untitled.png)

ì•ˆë‚˜ë‘ í¬ë¦¬ìŠ¤í† í”„ê°€ ë„ˆë¬´ ë‚˜ëŒ„ë‹¤.

â–ªï¸ë¬¸ì œ125. ìœ„ì˜ ì›Œë“œ í´ë¼ìš°ë“œì—ì„œ annaëŠ” ì œì™¸ì‹œí‚¤ì‹œì˜¤ ! 

```r
corpus <- tm_map(corpus, removeWords, c(stopwords("en"),"anna","kristoff","contd") )
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/816912ce-0050-4d8f-9f69-4ab28b14b0d1/Untitled.png)

â–ªï¸ë¬¸ì œ126. ì•ìœ¼ë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì‰½ê²Œ ê·¸ë¦´ ìˆ˜ ìˆë„ë¡ ì‹œê°í™” ìë™í™” ì½”ë“œì— ì¶”ê°€í•˜ê¸° ìœ„í•´ ë ˆì´ë”” ë²„ê·¸ ê²Œì‹œê¸€ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ëŠ” ì½”ë“œë¥¼ wordcloud.Rë¡œ ì €ì¥í•˜ì‹œì˜¤ ! 

```r
# ë°°ìš´ ì‚¬ëŒë“¤ì´ ì“°ëŠ” ì„¸ë ¨ëœ ì›Œë“œí´ë¼ìš°ë“œ 
install.packages("wordcloud2")

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
library(wordcloud2)
library(RColorBrewer)
library(plyr)
library(data.table)

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
setwd("c:\\data")  # íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
txt <- readLines('ladybug5.txt', encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ë¥¼ ì œê±°í•©ë‹ˆë‹¤. |nìš”ëŸ°ê±°. 
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")

# í•œê¸€ê³¼ ìˆ«ì, ê³µë°±ì„ ì œì™¸í•œ ëª¨ë“  íŠ¹ìˆ˜ë¬¸ìë¥¼ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("[^[:alnum:][:space:]ã„±-ã…ã…-ã…£ê°€-í£]", " ", cleaned_txt)

# ì—°ì†ëœ ê³µë°±ì„ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  # ì—°ì†ëœ ê³µë°± ì œê±°

# ëª…ì‚¬ ì¶”ì¶œ í•¨ìˆ˜ ( ì„ ìƒë‹˜ì´ ë§Œë“¤ì–´ì£¼ì‹  í•¨ìˆ˜. KoNLPì— ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ GPTì™€ í•¨ê»˜ë¼ë©´. ) 
extract_nouns_simple <- function(doc) {
  doc <- as.character(doc) # ë¬¸ìë¡œ ë³€í™˜
  words <- unlist(strsplit(doc, "\\s+"))  # ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬
  nouns <- Filter(function(x) {grepl("^[ê°€-í£]+$", x) && nchar(x) >= 2}, words)  # í•œê¸€ë¡œë§Œ êµ¬ì„±ëœ ë‹¨ì–´ ì¶”ì¶œ ë° ê¸¸ì´ 2 ì´ìƒ í•„í„°ë§
  return(nouns)                       â””grepì—ì„œì˜ êº½ì‡ : 'ì‹œì‘' 
}

# ëª…ì‚¬ ì¶”ì¶œ
nouns <- extract_nouns_simple(cleaned_txt)

# ì¶”ì¶œëœ ëª…ì‚¬ í™•ì¸
print(head(nouns, 10))  # ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ê³„ì‚°
word_freq <- table(nouns)
word_freq <- as.data.frame(word_freq, stringsAsFactors = FALSE)
word_freq <- arrange(word_freq, desc(Freq)) # ëª…ì‚¬ì˜ ë¹ˆë„ìˆ˜ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬

# ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸
print(head(word_freq, 10))

# ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ í™•ì¸ ë° ì œê±°
# ë¹ˆ ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ” í–‰ì„ ì œê±°í•©ë‹ˆë‹¤. 
word_freq <- word_freq[word_freq$nouns != "", ]

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ë°ì´í„°í”„ë ˆì„ í™•ì¸
print(head(word_freq, 10))

# ì›Œë“œí´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq, shape = "heart", color = brewer.pal(8, "Dark2"))
```

â–ªï¸ë¬¸ì œ127. ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ann.Rì˜ 7ë²ˆì— wordcloud ê·¸ë˜í”„ë¥¼ ì¶”ê°€í•˜ì‹œì˜¤ ! 

```r
clear.
```

â–ªï¸ë¬¸ì œ128. êµ¬ê¸€ ê²°ì œ ê³„ì •ì„ ë§Œë“œì‹œì˜¤ !  [ì°¸ê³ ](https://cafe.daum.net/oracleoracle/Soei/34)

```r
**Google Maps Platform** 
AIzaSyDerdchu9tK5etQ03pX4xdTNnr33XwuhG0
```

â–ªï¸[ì˜¤ëŠ˜ì˜ ë¬¸ì œ] 

ì˜¤ëŠ˜ ë°°ìš´ íˆìŠ¤í† ê·¸ë¨, ë°•ìŠ¤ ê·¸ë˜í”„, ì›Œë“œ í´ë¼ìš°ë“œ ë“±ì„ ì´ìš©í•´ì„œ SQL í¬íŠ¸í´ë¦¬ì˜¤ ë˜ëŠ” ë‹¤ë¥¸ ì‹œê°í™” í•˜ê³  ì‹¶ì€ ë°ì´í„°ë¥¼ ê³¨ë¼ì„œ ì‹œê°í™” í•˜ì‹œì˜¤ !

Q. í‰ê·  ë¬¼ê±´ê¸ˆì•¡ì´ ê°€ì¥ ë†’ì€ 3ê°œ ìì¹˜êµ¬ì™€ ê°€ì¥ ë‚®ì€ 3ê°œ ìì¹˜êµ¬ì˜ ë¬¼ê±´ê¸ˆì•¡ì„, ë°•ìŠ¤ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•´ë³´ì

```r
# plotly ì´ìš© 
gu1<- house[house$ìì¹˜êµ¬ëª…=='ê°•ë‚¨êµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]
gu2<- house[house$ìì¹˜êµ¬ëª…=='ìš©ì‚°êµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]
gu3<- house[house$ìì¹˜êµ¬ëª…=='ì„œì´ˆêµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]
gu4<- house[house$ìì¹˜êµ¬ëª…=='ê°•ë¶êµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]
gu5<- house[house$ìì¹˜êµ¬ëª…=='ë„ë´‰êµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]
gu6<- house[house$ìì¹˜êµ¬ëª…=='ê¸ˆì²œêµ¬', c('ë¬¼ê±´ê¸ˆì•¡')]

# x1 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig1 <- plot_ly(y = ~gu1, type = "box", name = "ê°•ë‚¨êµ¬")

# x2 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig2 <- plot_ly(y = ~gu2, type = "box", name = "ìš©ì‚°êµ¬")

# x2 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig3 <- plot_ly(y = ~gu2, type = "box", name = "ì„œì´ˆêµ¬")

# x3 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig4 <- plot_ly(y = ~gu3, type = "box", name = "ê°•ë¶êµ¬")

# x3 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig5 <- plot_ly(y = ~gu3, type = "box", name = "ë„ë´‰êµ¬")

# x2 ë°ì´í„°ì˜ ë°•ìŠ¤ í”Œë¡¯ ìƒì„±
fig6 <- plot_ly(y = ~gu2, type = "box", name = "ê¸ˆì²œì²œêµ¬")

# ì„œë¸Œí”Œë¡¯ìœ¼ë¡œ í•©ì¹˜ê¸°
fig <- subplot(fig1, fig2, fig3, fig4, fig5, fig6, nrows = 1, titleX = TRUE, titleY = TRUE)

# ë ˆì´ì•„ì›ƒ ì—…ë°ì´íŠ¸
fig <- fig %>% layout(title = "ìì¹˜êµ¬ë³„ ë¬¼ê±´ê¸ˆì•¡")

# ê·¸ë˜í”„ í‘œì‹œ
fig
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/614f29a6-8582-4d6e-89f6-eb0364e9a6e4/Untitled.png)

í•œ ì¶•ìœ¼ë¡œ í†µì¼í•´ì„œ ë³¼ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ë³´ì.

```r
boxplot ì‚¬ìš© 
boxplot(gu1, gu2, gu3, gu4, gu5, gu6, names=c("ê°•ë‚¨êµ¬", "ìš©ì‚°êµ¬", "ì„œì´ˆêµ¬", "ê°•ë¶êµ¬", "ë„ë´‰êµ¬", "ê¸ˆì²œêµ¬"), 
        main="ìƒìœ„3êµ¬, í•˜ìœ„3êµ¬ ë¬¼ê±´ê¸ˆì•¡", col=c('skyblue','yellowgreen','#FDB29D','gold','orchid','#FC758D'), ylab="ìì¹˜êµ¬ëª…", 
        xlab='ë¬¼ê±´ê¸ˆì•¡(ë‹¨ìœ„:ë§Œ ì›)', horizontal = TRUE)
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/c5ad6439-8929-41b8-b781-40c5d75b76ef/Untitled.png)

![1500000ì´ìƒ ì´ìƒì¹˜ ë¹¼ê³  ë‹¤ì‹œ ë½‘ì€ ê·¸ë˜í”„](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/8a58cc61-1709-4e8d-b9e8-e64578cc7b9a/Untitled.png)

1500000ì´ìƒ ì´ìƒì¹˜ ë¹¼ê³  ë‹¤ì‹œ ë½‘ì€ ê·¸ë˜í”„

ë°”ì´ì˜¬ë¦° ì€ ì™œ ì•ˆ ë˜ì§€. . .

```r

```

### âœ… ê°ì •ë¶„ì„ ë°ì´í„° ë¶„ì„

1. ì›Œë“œ í´ë¼ìš°ë“œ ì‹œê°í™” 
2. í‘œí˜•íƒœ ê¸ì •, ë¶€ì • ë‹¨ì–´ì˜ ìˆœìœ„ë¥¼ ë‚˜ì—´ í•˜ëŠ” ì‹œê°í™” 
- ê´€ë ¨ëœ ëŒ€í‘œì ì¸ ì‚¬ì´íŠ¸ : ì¸íŠ¸ë Œë“œ ì‚¬ì´íŠ¸
- ë‚˜ì˜ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ë” ì •êµí•œ ì‹œê°í™”ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ Rê³¼ íŒŒì´ì¬ ì½”ë“œ êµ¬í˜„

<aside>
ğŸ“Œ ì§€í˜œë¡œìš´ ì‚¬ëŒë“¤ì€ ë§¨ë•…ì—ì„œ ë§Œë“œëŠ”ê²Œ ì•„ë‹ˆë¼ ì˜ ëœ ì‚¬ëŒê±°, ì˜ í•´ì£¼ëŠ” ê±° ë³´ê³  ë‚´ ê±¸ë¡œ ë²¤ì¹˜ë§ˆí‚¹. 
ì˜ ë”°ë¼í•˜ê³ , í•˜ë‹¤ë³´ë©´ ë” ì¢‹ì€ê²Œ ìƒê¸´ë‹¤!

</aside>

â–ªï¸ë¬¸ì œ129. ì¡° ë°”ì´ë“  ì—°ì„¤ë¬¸ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™” í•˜ì‹œì˜¤ ! 

```r
# íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
install.packages("wordcloud2")
install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
install.packages("RColorBrewer") 
install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
install.packages("ggplot2")  
install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”

library(wordcloud2)
library(tm)
library(RColorBrewer)
library(htmlwidgets)
library(webshot)
library(magick)
library(ggplot2)
library(grid)

# PhantomJS ì„¤ì¹˜
webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
biden_file_path <- "joe.txt"
biden_txt <- readLines(biden_file_path, encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 

# í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
corpus <- VCorpus(VectorSource(cleaned_txt))

# ë°ì´í„° ì „ì²˜ë¦¬
corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 

# ë‹¨ì–´ í–‰ë ¬ ìƒì„±
dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
word_freq_Df

# ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
word_freq_df <- head(word_freq_df, 100)

# ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))

# htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)

# ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)

# magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
biden_img <- image_read("biden_cloud.png")

# ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
biden_plot <- ggplot() + 
  annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
  theme_void()

# í”Œë¡¯ ì¶œë ¥
print(biden_plot)

cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
```

![word_freq_dfì˜ í˜•íƒœ](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/5cf86864-e2b7-4054-9fd3-fa03b7bf492e/Untitled.png)

word_freq_dfì˜ í˜•íƒœ

â–ªï¸ë¬¸ì œ130. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™” í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("RColorBrewer") 
    install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
    install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
    install.packages("ggplot2")  
    install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    biden_file_path <- "joe.txt"
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
    corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
    corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
    corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
    corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
    m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
    word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    word_freq_Df
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    word_freq_df <- head(word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥  # ì €ì¥í•´ë†“ê³  ì´ë¯¸ì§€ ë¿Œë ¤ì£¼ëŠ”ê²Œ ë” ì˜ ë‚˜ì˜´
    saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    biden_img <- image_read("biden_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    biden_plot <- ggplot() + 
      annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(biden_plot)
    
    cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
    ```
    

[trump_cloud.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/88ce66c8-2e03-4e6b-8aa9-bc3d6e85ff1d/trump_cloud.png)

â–ªï¸ë¬¸ì œ131. ì¡°ë°”ì´ë“  ì—°ì„¤ë¬¸ì—ëŠ” ê¸ì • ë‹¨ì–´ê°€ ì–¼ë§ˆë‚˜ ë‚˜ì˜¤ëŠ”ì§€ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™”í•˜ì‹œì˜¤ 

- [ë°ì´í„°](https://cafe.daum.net/oracleoracle/Soei/45): ì˜ë¬¸ ê¸ì •ë‹¨ì–´, ì˜ë¬¸ ë¶€ì •ë‹¨ì–´
- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    setwd('c:\\data')
    biden_file_path <- "joe.txt"
    **positive_words_file <- "positive-words.txt"** 
    
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    **# ê¸ì •ë‹¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°**
    **positive_words <- readLines(positive_words_file, encoding = "UTF-8")**
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    **# ê¸ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]**
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(positive_plot)
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/737b265a-5455-4810-b763-8ff9a2620a1d/Untitled.png)

â–ªï¸ë¬¸ì œ132. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì˜ ê¸ì •ë‹¨ì–´ë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ê·¸ë¦¬ì‹œì˜¤! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    setwd('c:\\data')
    trump_file_path <- "trump.txt"
    positive_words_file <- "positive-words.txt" 
    
    trump_txt <- readLines(trump_file_path, encoding = "UTF-8")
    # ê¸ì •ë‹¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(trump_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(positive_plot)
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/e81d56b8-3a04-4c3d-8c59-e5f053d11e17/Untitled.png)

â–ªï¸ë¬¸ì œ133. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì—ì„œ ê¸ì •ë‹¨ì–´ì™€ ë¶€ì •ë‹¨ì–´ë¥¼ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ëŠ”ë° í•˜ë‚˜ì˜ í™”ë©´ì— ë°”ë¡œ ê°™ì´ ì¶œë ¥ ë˜ê²Œ í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("plyr")
    install.packages("data.table")
    **install.packages("patchwork") # ggplot ê°ì²´ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ í•„ìš”**
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(plyr)
    library(data.table)
    library(patchwork)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    **biden_file_path <- "trump.txt"**
    positive_words_file <- "positive-words.txt"
    negative_words_file <- "negative-words.txt"
    
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    negative_words <- readLines(negative_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ ë° ë¶€ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    negative_word_freq_df <- word_freq_df[word_freq_df$word %in% negative_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    negative_word_freq_df <- head(negative_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    negative_cloud <- wordcloud2(data = negative_word_freq_df, shape = "circle", color = brewer.pal(8, "Reds"))
    
    # htmlwidgetsë¡œ ê°ê°ì˜ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    saveWidget(negative_cloud, "negative_cloud.html", selfcontained = TRUE)
    
    # ë‘ ê°œì˜ htmlwidgetsì„ í•œ í™”ë©´ì— í‘œì‹œ
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    webshot("negative_cloud.html", file = "negative_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    negative_img <- image_read("negative_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    negative_plot <- ggplot() + 
      annotation_custom(rasterGrob(negative_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # patchworkë¡œ ë‘ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í‘œì‹œ
    combined_plot <- positive_plot + negative_plot
    
    # í”Œë¡¯ ì¶œë ¥
    print(combined_plot)
    
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/802ae315-3b43-4a38-b95f-258126fe0f42/Untitled.png)

â–ªï¸ë¬¸ì œ134. ì¡°ë°”ì´ë“  ì—°ì„¤ë¬¸ì˜ ê¸ì •ê³¼ ë¶€ì • ë‹¨ì–´ë¥¼ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ëŠ”ë° í•˜ë‚˜ì˜ í™”ë©´ì— ë°”ë¡œ ê°™ì´ ì¶œë ¥ ë˜ê²Œ í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("plyr")
    install.packages("data.table")
    **install.packages("patchwork") # ggplot ê°ì²´ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ í•„ìš”**
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(plyr)
    library(data.table)
    library(patchwork)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    **biden_file_path <- "joe.txt"**
    positive_words_file <- "positive-words.txt"
    negative_words_file <- "negative-words.txt"
    
    **joe**_txt <- readLines(biden_file_path, encoding = "UTF-8")
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    negative_words <- readLines(negative_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(joe_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ ë° ë¶€ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    negative_word_freq_df <- word_freq_df[word_freq_df$word %in% negative_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    negative_word_freq_df <- head(negative_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    negative_cloud <- wordcloud2(data = negative_word_freq_df, shape = "circle", color = brewer.pal(8, "Reds"))
    
    # htmlwidgetsë¡œ ê°ê°ì˜ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    saveWidget(negative_cloud, "negative_cloud.html", selfcontained = TRUE)
    
    # ë‘ ê°œì˜ htmlwidgetsì„ í•œ í™”ë©´ì— í‘œì‹œ
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    webshot("negative_cloud.html", file = "negative_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    negative_img <- image_read("negative_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    negative_plot <- ggplot() + 
      annotation_custom(rasterGrob(negative_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # patchworkë¡œ ë‘ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í‘œì‹œ
    combined_plot <- positive_plot + negative_plot
    
    # í”Œë¡¯ ì¶œë ¥
    print(combined_plot)
    
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/864c02f5-d936-45cf-a511-161b661687f8/Untitled.png)

**[0704 ì ì‹¬ë¬¸ì œ]** 

cbs ë¼ë””ì˜¤ ê·¸ëŒ€ì™€ ì—¬ëŠ” ì•„ì¹¨ ì„ ê³¡í‘œì˜ ë…¸ë˜ ë‹¨ì–´ë“¤ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ í™•ì¸í•˜ì„¸ìš”.

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("RColorBrewer") 
    install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
    install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
    install.packages("ggplot2")  
    install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    playlist_file_path <- "playlist.txt"
    playlist_txt <- readLines(playlist_file_path, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
    corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
    corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
    corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
    corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
    m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
    word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    word_freq_Df
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    word_freq_df <- head(word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    biden_img <- image_read("biden_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    biden_plot <- ggplot() + 
      annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(biden_plot)
    
    cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/5dd14d4b-37e8-476c-90dc-9de149049875/Untitled.png)

**[0708 ì ì‹¬ë¬¸ì œ]**

ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ ì—°ì„¤ë¬¸ìœ¼ë¡œ ê¸ì •ë‹¨ì–´ì™€ ë¶€ì •ë‹¨ì–´ë¥¼ ì‹œê°í™” í•˜ì‹œì˜¤ ! â†’ [ë°ì´í„°](https://cafe.daum.net/oracleoracle/Sotv/322)

- ì½”ë“œ
    
    ```r
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(plyr)
    library(data.table)
    library(patchwork)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    jobs_file_path <- "jobs.txt"
    positive_words_file <- "positive-words.txt"
    negative_words_file <- "negative-words.txt"
    
    jobs_txt <- readLines(jobs_file_path, encoding = "UTF-8")
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    negative_words <- readLines(negative_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(jobs_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ ë° ë¶€ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    negative_word_freq_df <- word_freq_df[word_freq_df$word %in% negative_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    negative_word_freq_df <- head(negative_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    negative_cloud <- wordcloud2(data = negative_word_freq_df, shape = "circle", color = brewer.pal(8, "Reds"))
    
    # htmlwidgetsë¡œ ê°ê°ì˜ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    saveWidget(negative_cloud, "negative_cloud.html", selfcontained = TRUE)
    
    # ë‘ ê°œì˜ htmlwidgetsì„ í•œ í™”ë©´ì— í‘œì‹œ
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    webshot("negative_cloud.html", file = "negative_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    negative_img <- image_read("negative_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    negative_plot <- ggplot() + 
      annotation_custom(rasterGrob(negative_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # patchworkë¡œ ë‘ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í‘œì‹œ
    combined_plot <- positive_plot + negative_plot
    
    # í”Œë¡¯ ì¶œë ¥
    print(combined_plot)
    
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/f682eceb-33dd-4d18-9228-a828d751c590/Untitled.png)
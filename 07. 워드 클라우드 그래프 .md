# 7ï¸âƒ£ì›Œë“œ í´ë¼ìš°ë“œ ê·¸ë˜í”„ 
### âœ… ì›Œë“œ í´ë¼ìš°ë“œ ê·¸ë˜í”„ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°?  
1. í…ìŠ¤íŠ¸ ë°ì´í„° íƒìƒ‰ ë° ìš”ì•½ ê·¸ë¦¬ê³  ì£¼ìš” ë‹¨ì–´ ê°•ì¡° ë“±ì„ ì‹œê°í™” í•˜ê³  ì‹¶ì„ ë•Œ  
2. íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ê±°ë‚˜ ì†Œì…œ ë¯¸ë””ì–´ì™€ ë‰´ìŠ¤ì—ì„œ ì–¸ê¸‰í•˜ëŠ” ì£¼ìš” ë‚´ìš©ë“¤ì„ ë¶„ì„í•  ë•Œ    
3. ë§ˆì¼€íŒ…ì—ì„œ ê³ ê° ë§Œì¡±ë„ ë“±ì„ ì¡°ì‚¬í•  ë•Œ    
4. ë¬¸ì„œë‚˜ ë¬¸í•™ ì‘í’ˆì„ ë¶„ì„í•˜ê³ ì í•  ë•Œ

&nbsp;

### âœ…Â Rjava ì„¤ì¹˜
```r
1.Â javaÂ 64ë¹„íŠ¸ ë‹¤ìš´
https://www.java.com/en/download/manual.jsp

2. Windows Offline (64-bit) ìœ¼ë¡œ ì„¤ì¹˜

3.Â ì•„ë˜ì™€Â ê°™ì´Â í™˜ê²½ì„¤ì •ì„Â í•œë‹¤.
(RìŠ¤íŠœë””ì˜¤) Sys.setenv(JAVA_HOME='C:\\ProgramÂ Files\\Java\\jre1.8.0')(cë“œë¼ì´ë¸Œìë°”ìœ„ì¹˜)
â€»Â ì„¤ëª…Â :Â RÂ ì—ì„œÂ ì§€ê¸ˆÂ ìë°”í™ˆÂ ìœ„ì¹˜ê°€Â ì–´ë””ìˆë‹¤ëŠ”Â ê²ƒì„Â ì•Œë ¤ì£¼ëŠ”Â ê²ƒ

4.Â ì„¤ì¹˜ë¥¼Â í•œë‹¤
install.packages("rJava")

library(rJava)
```

&nbsp;


### ğŸ“Code1. wordcloud2íŒ¨í‚¤ì§€_ë ˆì´ë”” ë²„ê·¸ ê²Œì‹œíŒì˜ ê²Œì‹œê¸€(í•œê¸€ ë°ì´í„°)
```r
# ë°°ìš´ ì‚¬ëŒë“¤ì´ ì“°ëŠ” ì„¸ë ¨ëœ ì›Œë“œí´ë¼ìš°ë“œ 
install.packages("wordcloud2")

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
library(wordcloud2)
library(RColorBrewer)
library(plyr)
library(data.table)

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
txt <- readLines('ladybug5.txt', encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ë¥¼ ì œê±° |nìš”ëŸ°ê±°. 
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")

# í•œê¸€, ìˆ«ì, ê³µë°±ì„ ì œì™¸í•œ ëª¨ë“  íŠ¹ìˆ˜ë¬¸ìë¥¼ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´
cleaned_txt <- gsub("[^[:alnum:][:space:]ã„±-ã…ã…-ã…£ê°€-í£]", " ", cleaned_txt)

# ì—°ì†ëœ ê³µë°±ì„ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ ë³€í™˜
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  

# ëª…ì‚¬ ì¶”ì¶œ í•¨ìˆ˜ 
extract_nouns_simple <- function(doc) {
  doc <- as.character(doc) # ë¬¸ìë¡œ ë³€í™˜
  words <- unlist(strsplit(doc, "\\s+"))  # ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ ë¶„ë¦¬
  nouns <- Filter(function(x) {grepl("^[ê°€-í£]+$", x) && nchar(x) >= 2}, words)
	#	grepì—ì„œì˜ êº½ì‡ ^: 'ì‹œì‘'â”˜     í•œê¸€ë¡œë§Œ êµ¬ì„±ëœ ë‹¨ì–´ ì¶”ì¶œ ë° ê¸¸ì´ 2 ì´ìƒ í•„í„°ë§
  return(nouns)                       
}

# ëª…ì‚¬ ì¶”ì¶œ
nouns <- extract_nouns_simple(cleaned_txt)

# ì¶”ì¶œëœ ëª…ì‚¬ í™•ì¸
print(head(nouns, 10))  # ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ê³„ì‚°
word_freq <- table(nouns)
word_freq <- as.data.frame(word_freq, stringsAsFactors = FALSE)
word_freq <- arrange(word_freq, desc(Freq))   # ëª…ì‚¬ì˜ ë¹ˆë„ìˆ˜ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬

# ìƒìœ„ 10ê°œ ë‹¨ì–´ í™•ì¸
print(head(word_freq, 10))

# ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ í™•ì¸ ë° ì œê±°
# ë¹ˆ ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ” í–‰ì„ ì œê±°í•©ë‹ˆë‹¤. 
word_freq <- word_freq[word_freq$nouns != "", ]

# ë‹¨ì–´ ë¹ˆë„ìˆ˜ ë°ì´í„°í”„ë ˆì„ í™•ì¸
print(head(word_freq, 10))

# íŠ¹ì • ë‹¨ì–´ ì œì™¸í•˜ê¸°
word_freq <- subset( word_freq, nouns != "ë„ˆë¬´")
word_freq <- subset( word_freq, nouns != "ë¹¨ë¦¬")

# ì›Œë“œí´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq, shape = "heart", color = brewer.pal(8, "Dark2"))
```

<img src="https://github.com/goguma999/R__/blob/main/_7-1.png">


**<ê¸°ë³¸ ì œê³µ ëª¨ì–‘>**
```r
circle: ì›í˜• (ê¸°ë³¸ê°’)
cardioid: ì‹¬ì¥ ëª¨ì–‘
diamond: ë‹¤ì´ì•„ëª¬ë“œ ëª¨ì–‘
triangle-forward: ì •ì‚¼ê°í˜• (ì•ìª½)
triangle: ì •ì‚¼ê°í˜• (ë’¤ìª½)
pentagon: ì˜¤ê°í˜•
star: ë³„ ëª¨ì–‘
```

&nbsp;


### ğŸ“Code2. wordcloud2íŒ¨í‚¤ì§€_ê²¨ìš¸ì™•êµ­ ëŒ€ë³¸(ì˜ë¬¸ ë°ì´í„°)
```r
install.packages("wordcloud2")
install.packages("tm")           # í…ìŠ¤íŠ¸ ë°ì´í„° ì „ì²˜ë¦¬ ì „ë¬¸ íŒ¨í‚¤ì§€
install.packages("RColorBrewer") 
install.packages("plyr")         # ë°ì´í„° ì¡°ì‘ì„ ìœ„í•œ íŒ¨í‚¤ì§€
install.packages("data.table")   

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
library(wordcloud2)
library(tm)
library(RColorBrewer)
library(plyr)
library(data.table)

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
file_path <- "winter.txt"
txt <- readLines(file_path, encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
# ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ ì œê±°
cleaned_txt <- iconv(txt, "UTF-8", "UTF-8", sub="")
# íŠ¹ìˆ˜ë¬¸ì ì œê±° 
cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
# ì—°ì†ëœ ê³µë°±ë¬¸ìë¥¼ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt)  

# í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜ ( í…ìŠ¤íŠ¸ ë§ˆì´ë‹ íŒ¨í‚¤ì§€ì˜ corpus ê°ì²´ë¡œ ë³€í™˜ )
corpus <- Corpus(VectorSource(cleaned_txt))

# ë°ì´í„° ì „ì²˜ë¦¬
corpus <- tm_map(corpus, content_transformer(tolower))  # ì†Œë¬¸ìë¡œ ë³€í™˜
corpus <- tm_map(corpus, removePunctuation)  # êµ¬ë‘ì  ì œê±°(.,?!...)
corpus <- tm_map(corpus, removeNumbers)  # ìˆ«ì ì œê±°
corpus <- tm_map(corpus, removeWords, stopwords("en")) # ì˜ì–´ ë¶ˆìš©ì–´ ì œê±°(am, i, a, the..)
corpus <- tm_map(corpus, stripWhitespace)  # ì—¬ë°± ì œê±°

# ë‹¨ì–´ í–‰ë ¬ ìƒì„±
dtm <- TermDocumentMatrix(corpus)
m <- as.matrix(dtm)
word_freqs <- sort(rowSums(m), decreasing = TRUE) #ë‹¨ì–´ì˜ ë¹ˆë„ìˆ˜ê°€ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)

# anna, kristoff contd ì œì™¸
corpus <- tm_map(corpus, removeWords, c(stopwords("en"),"anna","kristoff","contd") )

# ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„± (í•˜íŠ¸ ëª¨ì–‘)
wordcloud2(data = word_freq_df, shape = "heart", color = brewer.pal(8, "Dark2"))
```

<img src="https://github.com/goguma999/R__/blob/main/_7-2.png">


&nbsp;


### âœ… ê°ì •ë¶„ì„ ë°ì´í„° ë¶„ì„

1. ì›Œë“œ í´ë¼ìš°ë“œ ì‹œê°í™” 
2. í‘œí˜•íƒœ ê¸ì •, ë¶€ì • ë‹¨ì–´ì˜ ìˆœìœ„ë¥¼ ë‚˜ì—´ í•˜ëŠ” ì‹œê°í™” 
- ê´€ë ¨ëœ ëŒ€í‘œì ì¸ ì‚¬ì´íŠ¸ : ì¸íŠ¸ë Œë“œ ì‚¬ì´íŠ¸
- ë‚˜ì˜ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ë” ì •êµí•œ ì‹œê°í™”ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ Rê³¼ íŒŒì´ì¬ ì½”ë“œ êµ¬í˜„


### ğŸ“Code3. wordcloud2íŒ¨í‚¤ì§€_ì¡° ë°”ì´ë“  ì—°ì„¤ë¬¸ì˜ ê¸ì • & ë¶€ì • ë‹¨ì–´
```r
# íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
install.packages("wordcloud2")
install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
install.packages("RColorBrewer") 
install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
install.packages("ggplot2")  
install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”

library(wordcloud2)
library(tm)
library(RColorBrewer)
library(htmlwidgets)
library(webshot)
library(magick)
library(ggplot2)
library(grid)

# PhantomJS ì„¤ì¹˜
webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 

# í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
biden_file_path <- "joe.txt"
biden_txt <- readLines(biden_file_path, encoding = "UTF-8")

# íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 

# í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
corpus <- VCorpus(VectorSource(cleaned_txt))

# ë°ì´í„° ì „ì²˜ë¦¬
corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 

# ë‹¨ì–´ í–‰ë ¬ ìƒì„±
dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
word_freq_Df

# ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
word_freq_df <- head(word_freq_df, 100)

# ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))

# htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)

# ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)

# magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
biden_img <- image_read("biden_cloud.png")

# ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
biden_plot <- ggplot() + 
  annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
  theme_void()

# í”Œë¡¯ ì¶œë ¥
print(biden_plot)

cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
```

![word_freq_dfì˜ í˜•íƒœ](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/5cf86864-e2b7-4054-9fd3-fa03b7bf492e/Untitled.png)

word_freq_dfì˜ í˜•íƒœ

â–ªï¸ë¬¸ì œ130. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™” í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("RColorBrewer") 
    install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
    install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
    install.packages("ggplot2")  
    install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    biden_file_path <- "joe.txt"
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
    corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
    corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
    corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
    corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
    m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
    word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    word_freq_Df
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    word_freq_df <- head(word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥  # ì €ì¥í•´ë†“ê³  ì´ë¯¸ì§€ ë¿Œë ¤ì£¼ëŠ”ê²Œ ë” ì˜ ë‚˜ì˜´
    saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    biden_img <- image_read("biden_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    biden_plot <- ggplot() + 
      annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(biden_plot)
    
    cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
    ```
    

[trump_cloud.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/88ce66c8-2e03-4e6b-8aa9-bc3d6e85ff1d/trump_cloud.png)

â–ªï¸ë¬¸ì œ131. ì¡°ë°”ì´ë“  ì—°ì„¤ë¬¸ì—ëŠ” ê¸ì • ë‹¨ì–´ê°€ ì–¼ë§ˆë‚˜ ë‚˜ì˜¤ëŠ”ì§€ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ì‹œê°í™”í•˜ì‹œì˜¤ 

- [ë°ì´í„°](https://cafe.daum.net/oracleoracle/Soei/45): ì˜ë¬¸ ê¸ì •ë‹¨ì–´, ì˜ë¬¸ ë¶€ì •ë‹¨ì–´
- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    setwd('c:\\data')
    biden_file_path <- "joe.txt"
    **positive_words_file <- "positive-words.txt"** 
    
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    **# ê¸ì •ë‹¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°**
    **positive_words <- readLines(positive_words_file, encoding = "UTF-8")**
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    **# ê¸ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]**
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(positive_plot)
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/737b265a-5455-4810-b763-8ff9a2620a1d/Untitled.png)

â–ªï¸ë¬¸ì œ132. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì˜ ê¸ì •ë‹¨ì–´ë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ê·¸ë¦¬ì‹œì˜¤! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    setwd('c:\\data')
    trump_file_path <- "trump.txt"
    positive_words_file <- "positive-words.txt" 
    
    trump_txt <- readLines(trump_file_path, encoding = "UTF-8")
    # ê¸ì •ë‹¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(trump_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(positive_plot)
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/e81d56b8-3a04-4c3d-8c59-e5f053d11e17/Untitled.png)

â–ªï¸ë¬¸ì œ133. íŠ¸ëŸ¼í”„ ì—°ì„¤ë¬¸ì—ì„œ ê¸ì •ë‹¨ì–´ì™€ ë¶€ì •ë‹¨ì–´ë¥¼ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ëŠ”ë° í•˜ë‚˜ì˜ í™”ë©´ì— ë°”ë¡œ ê°™ì´ ì¶œë ¥ ë˜ê²Œ í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("plyr")
    install.packages("data.table")
    **install.packages("patchwork") # ggplot ê°ì²´ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ í•„ìš”**
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(plyr)
    library(data.table)
    library(patchwork)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    **biden_file_path <- "trump.txt"**
    positive_words_file <- "positive-words.txt"
    negative_words_file <- "negative-words.txt"
    
    biden_txt <- readLines(biden_file_path, encoding = "UTF-8")
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    negative_words <- readLines(negative_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ ë° ë¶€ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    negative_word_freq_df <- word_freq_df[word_freq_df$word %in% negative_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    negative_word_freq_df <- head(negative_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    negative_cloud <- wordcloud2(data = negative_word_freq_df, shape = "circle", color = brewer.pal(8, "Reds"))
    
    # htmlwidgetsë¡œ ê°ê°ì˜ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    saveWidget(negative_cloud, "negative_cloud.html", selfcontained = TRUE)
    
    # ë‘ ê°œì˜ htmlwidgetsì„ í•œ í™”ë©´ì— í‘œì‹œ
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    webshot("negative_cloud.html", file = "negative_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    negative_img <- image_read("negative_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    negative_plot <- ggplot() + 
      annotation_custom(rasterGrob(negative_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # patchworkë¡œ ë‘ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í‘œì‹œ
    combined_plot <- positive_plot + negative_plot
    
    # í”Œë¡¯ ì¶œë ¥
    print(combined_plot)
    
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/802ae315-3b43-4a38-b95f-258126fe0f42/Untitled.png)

â–ªï¸ë¬¸ì œ134. ì¡°ë°”ì´ë“  ì—°ì„¤ë¬¸ì˜ ê¸ì •ê³¼ ë¶€ì • ë‹¨ì–´ë¥¼ ì›Œë“œ í´ë¼ìš°ë“œë¡œ ê·¸ë¦¬ëŠ”ë° í•˜ë‚˜ì˜ í™”ë©´ì— ë°”ë¡œ ê°™ì´ ì¶œë ¥ ë˜ê²Œ í•˜ì‹œì˜¤ ! 

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")
    install.packages("RColorBrewer")
    install.packages("plyr")
    install.packages("data.table")
    **install.packages("patchwork") # ggplot ê°ì²´ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ í•„ìš”**
    install.packages("htmlwidgets")
    install.packages("webshot")
    install.packages("magick")
    install.packages("ggplot2")
    install.packages("grid")
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(plyr)
    library(data.table)
    library(patchwork)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs()
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    **biden_file_path <- "joe.txt"**
    positive_words_file <- "positive-words.txt"
    negative_words_file <- "negative-words.txt"
    
    **joe**_txt <- readLines(biden_file_path, encoding = "UTF-8")
    positive_words <- readLines(positive_words_file, encoding = "UTF-8")
    negative_words <- readLines(negative_words_file, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(joe_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt)
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt)
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower))
    corpus <- tm_map(corpus, removePunctuation)
    corpus <- tm_map(corpus, removeNumbers)
    corpus <- tm_map(corpus, removeWords, stopwords("en"))
    corpus <- tm_map(corpus, stripWhitespace)
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)
    m <- as.matrix(dtm)
    word_freqs <- sort(rowSums(m), decreasing = TRUE)
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    
    # ê¸ì • ë‹¨ì–´ ë° ë¶€ì • ë‹¨ì–´ í•„í„°ë§
    positive_word_freq_df <- word_freq_df[word_freq_df$word %in% positive_words, ]
    negative_word_freq_df <- word_freq_df[word_freq_df$word %in% negative_words, ]
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    positive_word_freq_df <- head(positive_word_freq_df, 100)
    negative_word_freq_df <- head(negative_word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    positive_cloud <- wordcloud2(data = positive_word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    negative_cloud <- wordcloud2(data = negative_word_freq_df, shape = "circle", color = brewer.pal(8, "Reds"))
    
    # htmlwidgetsë¡œ ê°ê°ì˜ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(positive_cloud, "positive_cloud.html", selfcontained = TRUE)
    saveWidget(negative_cloud, "negative_cloud.html", selfcontained = TRUE)
    
    # ë‘ ê°œì˜ htmlwidgetsì„ í•œ í™”ë©´ì— í‘œì‹œ
    webshot("positive_cloud.html", file = "positive_cloud.png", delay = 10)
    webshot("negative_cloud.html", file = "negative_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    positive_img <- image_read("positive_cloud.png")
    negative_img <- image_read("negative_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    positive_plot <- ggplot() + 
      annotation_custom(rasterGrob(positive_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    negative_plot <- ggplot() + 
      annotation_custom(rasterGrob(negative_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # patchworkë¡œ ë‘ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í‘œì‹œ
    combined_plot <- positive_plot + negative_plot
    
    # í”Œë¡¯ ì¶œë ¥
    print(combined_plot)
    
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/864c02f5-d936-45cf-a511-161b661687f8/Untitled.png)

**[0704 ì ì‹¬ë¬¸ì œ]** 

cbs ë¼ë””ì˜¤ ê·¸ëŒ€ì™€ ì—¬ëŠ” ì•„ì¹¨ ì„ ê³¡í‘œì˜ ë…¸ë˜ ë‹¨ì–´ë“¤ì„ ì›Œë“œ í´ë¼ìš°ë“œë¡œ í™•ì¸í•˜ì„¸ìš”.

- ì½”ë“œ
    
    ```r
    # íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
    install.packages("wordcloud2")
    install.packages("tm")  # ë¬¸ìë¥¼ ì •ì œí•˜ê³  ì „ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("RColorBrewer") 
    install.packages("htmlwidgets") # html ìœ„ì ¯ì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš” 
    install.packages("webshot")  # html íŒŒì¼ì„ pngê·¸ë¦¼íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ í•„ìš”
    install.packages("magick")   # ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ 
    install.packages("ggplot2")  
    install.packages("grid")     # ë‘ ê°œì˜ ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— ì¶œë ¥í•˜ê¸° ìœ„í•´ í•„ìš”
    
    library(wordcloud2)
    library(tm)
    library(RColorBrewer)
    library(htmlwidgets)
    library(webshot)
    library(magick)
    library(ggplot2)
    library(grid)
    
    # PhantomJS ì„¤ì¹˜
    webshot::install_phantomjs() # webshot íŒ¨í‚¤ì§€ë¥¼ ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ 
    
    # í…ìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ
    playlist_file_path <- "playlist.txt"
    playlist_txt <- readLines(playlist_file_path, encoding = "UTF-8")
    
    # íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ê³µë°± ì²˜ë¦¬
    cleaned_txt <- iconv(biden_txt, "UTF-8", "UTF-8", sub="")
    cleaned_txt <- gsub("[^[:alnum:][:space:]]", " ", cleaned_txt) #ë¬¸ìë‚˜ ìˆ«ì ì•„ë‹Œ ê²ƒ ì œê±° 
    cleaned_txt <- gsub("\\s+", " ", cleaned_txt) # ë‘ ë²ˆì´ìƒì˜ ê³µë°±ë¬¸ì ì œê±° 
    
    # í…ìŠ¤íŠ¸ë¥¼ Corpusë¡œ ë³€í™˜
    corpus <- VCorpus(VectorSource(cleaned_txt))
    
    # ë°ì´í„° ì „ì²˜ë¦¬
    corpus <- tm_map(corpus, content_transformer(tolower)) # ì†Œë¬¸ì ë³€í™˜
    corpus <- tm_map(corpus, removePunctuation)            # êµ¬ë‘ì  ì œê±°    
    corpus <- tm_map(corpus, removeNumbers)                # ìˆ«ì ì œê±° 
    corpus <- tm_map(corpus, removeWords, stopwords("en")) # ë¶ˆìš©ì–´ ì œê±° 
    corpus <- tm_map(corpus, stripWhitespace)              # ê³µë°±ë§Œ ìˆëŠ” í–‰ ì œê±° 
    
    # ë‹¨ì–´ í–‰ë ¬ ìƒì„±
    dtm <- TermDocumentMatrix(corpus)  # ë‹¨ì–´ í–‰ë ¬ ë§Œë“¤ê¸° 
    m <- as.matrix(dtm)                # í–‰ë ¬í˜•íƒœë¡œ ë³€í™˜
    word_freqs <- sort(rowSums(m), decreasing = TRUE)  # ë¹ˆë„ìˆ˜ ë†’ì€ ë‹¨ì–´ë¡œ ì •ë ¬
    word_freq_df <- data.frame(word = names(word_freqs), freq = word_freqs)
    word_freq_Df
    
    # ìƒìœ„ 100ê°œì˜ ë‹¨ì–´ë§Œ ì„ íƒ
    word_freq_df <- head(word_freq_df, 100)
    
    # ì›Œë“œ í´ë¼ìš°ë“œ ìƒì„±
    word_cloud <- wordcloud2(data = word_freq_df, shape = "circle", color = brewer.pal(8, "Dark2"))
    
    # htmlwidgetsë¡œ ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì €ì¥
    saveWidget(word_cloud, "biden_cloud.html", selfcontained = TRUE)
    
    # ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
    webshot("biden_cloud.html", file = "biden_cloud.png", delay = 10)
    
    # magickìœ¼ë¡œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    biden_img <- image_read("biden_cloud.png")
    
    # ggplotìœ¼ë¡œ ì´ë¯¸ì§€ ë³€í™˜
    biden_plot <- ggplot() + 
      annotation_custom(rasterGrob(biden_img, width=unit(1,"npc"), height=unit(1,"npc"))) + 
      theme_void()
    
    # í”Œë¡¯ ì¶œë ¥
    print(biden_plot)
    
    cë“œë¼ì´ë¸Œ-data ë°‘ì—ì„œ png í™•ì¸ ê°€ëŠ¥ 
    ```
    

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/08691aea-b5b9-4275-80cd-5d0d824962f4/5dd14d4b-37e8-476c-90dc-9de149049875/Untitled.png)




